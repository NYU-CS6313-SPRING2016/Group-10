<!DOCTYPE html>
<html>
  <head>
    <style>
      .hidden {
        display: none;
      }
      div.tooltip {
          color: #222;
          background-color: #fff;
          padding: .5em;
          text-shadow: #f5f5f5 0 1px 0;
          border-radius: 2px;
          opacity: 0.9;
          position: absolute;
      }
    </style>
    <title>NYC TWITTER - DATA VISUALIZATION</title>

  </head>
  <body>
    <div class="left-panel">
      <h1>Twitter NYC</h1>

      <p>Where are the trends emerging?</p>
    </div>
    <div class="right-panel">
    </div>
  </body>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="nyc.geojson"></script>
  <script>

    var width = 960,
     height = 500;

        //cordinates
    var bronx = [-73.8648, 40.8448, ];
    var manhattan = [-73.9712, 40.7831];
    var queens = [-73.7949, 40.7282];
    var brooklyn = [-73.9442, 40.6782]; 
    var harlem = [-73.9465, 40.8116];
    var ny = [-74.0059, 40.7128];

    var svg = d3.select("body").append("svg")
      .attr("width", width)
      .attr("height", height);

    d3.json("nyc.geojson", function(error, nyb) {

      console.log(nyb)

      var projection = d3.geo.mercator()
              .center([-73.94, 40.70])
              .scale(50000)
              .translate([(width) / 2, (height)/2]);

      var path = d3.geo.path()
          .projection(projection);

      var tooltip = d3.select('body').append('div')
                .attr('class', 'hidden tooltip');

      var g = svg.append("g").attr("id","map");

      g.append("g")
        .attr("id", "boroughs")
        .selectAll(".state")
        .data(nyb.features)
        .enter().append("path")
        .attr("class", function(d){ return d.properties.name; })
        .attr("d", path)
        .attr("borough", function(d) { return d.properties.borough; })
        .on('mousemove', function(d) {
            var mouse = d3.mouse(svg.node()).map(function(d) {
                return parseInt(d);
            });
            tooltip.classed('hidden', false)
                .attr('style', 'left:' + (mouse[0] + 15) +
                        'px; top:' + (mouse[1] - 5) + 'px')
                .html(d.properties.PO_NAME + "</br>" + d.properties.borough);
        })
        .on('mouseout', function() {
            tooltip.classed('hidden', true)
        })
        .style("fill","#ccc")
        .attr("stroke", "black");

      // add circles to svg
      var dots = g.select("#map")
        .selectAll("circle")
        .data([brooklyn[0],brooklyn[1]]).enter()
        .append("circle")
        .attr("cx", brooklyn[0])
        .attr("cy", brooklyn[1])
        .attr("r", 10)
        .attr("fill", "red");

    });

    svg.selectAll("circle")
      .data("Empire").enter()
      .append("circle")
      .attr("cx", brooklyn[0])
      .attr("cy", brooklyn[1])
      .attr("r", 10)
      .attr("fill", "blue");

  </script>
</html>